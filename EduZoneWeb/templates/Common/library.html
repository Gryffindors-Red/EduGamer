<!DOCTYPE html>
<html lang="en">

</html>
{% load static %}

<html>

<head>
  <!-- basic -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- mobile metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
  <!-- site metas -->
  <title>EDUGAMER</title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- bootstrap css -->
  <link rel="stylesheet" href=" {% static 'css/bootstrap.min.css' %} ">
  <!-- style css -->
  <link rel="stylesheet" href=" {% static 'css/sstyle.css' %} ">
  <!-- Responsive-->
  <link rel="stylesheet" href=" {% static 'css/responsive.css' %} ">
  <!-- fevicon -->
  <link rel="icon" href=" {% static 'images/fevicon.png' %} " type="image/gif" />
  <!-- Scrollbar Custom CSS -->
  <link rel="stylesheet" href=" {% static 'css/jquery.mCustomScrollbar.min.css' %} ">
  <!-- Tweaks for older IEs-->
  <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
            <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<!-- body -->

<body class="main-layout">
  <!-- loader  -->
  <div class="loader_bg">
    <div class="loader"><img src=" {% static 'images/loading.gif' %} " alt="#" /></div>
  </div>
  <!-- end loader -->
  <!-- header -->


  <head>
    <title>Online Meeting Platform</title>
    <link rel="stylesheet" href=" {% static 'sstyle.css' %} ">
  </head>

  <body>
    <h1>Online Meeting Platform</h1>
    <div class="container">
      <div class="card">
        <div class="card-header">
          <h2>Meeting Room 1</h2>
          <button class="btn">Join</button>
        </div>
        <div class="card-body">
          <p>No participants yet</p>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <h2>Meeting Room 2</h2>
          <button class="btn">Join</button>
        </div>
        <div class="card-body">
          <p>No participants yet</p>
        </div>
      </div>
    </div>
  </body>

</html>

<!-- Javascript files-->
<script src=" {% static 'js/jquery.min.js' %} "></script>
<script src=" {% static 'js/popper.min.js' %} "></script>
<script src=" {% static 'js/bootstrap.bundle.min.js' %} "></script>
<script src=" {% static 'js/jquery-3.0.0.min.js' %} "></script>
<script src=" {% static 'js/plugin.js' %} "></script>
<!-- sidebar -->
<script src=" {% static 'js/jquery.mCustomScrollbar.concat.min.js' %} "></script>
<script src=" {% static 'js/custom.js' %} "></script>
<script>
  var web3 = new Web3(window.ethereum);

  async function connectMetamask() {

    try {
      // Prompt user to connect their Metamask wallet
      await window.ethereum.enable();

      const web3 = new Web3(window.ethereum);
      // Retrieve the user's Ethereum address
      var accounts = await web3.eth.getAccounts();
      var userAddress = accounts[0];
      var csrftoken = Cookies.get('csrftoken');
      console.log(userAddress)
      // Send the Ethereum address to the Django backend using an AJAX request
      $.ajax({
        url: "{% url 'connect_metamask' %}",
        type: 'get',
        data: { 'address': userAddress },
        success: function (response) {
          console.log(response);
        }
      });
    } catch (error) {
      console.log(error);
    }
  }

</script>
</body>

</html>